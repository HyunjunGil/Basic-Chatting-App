{"version":3,"sources":["firebase.js","App.js","SignUp.js","Routes.js","reportWebVitals.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","App","history","useHistory","useState","chats","setChats","chatContent","setChatContent","chatCnt","setChatCnt","targetDocumentId","setTargetDocumentId","updatedContent","setUpdatedContent","email","setEmail","password","setPassword","uid","setUid","nickName","setNickName","loginStatus","setLoginStatus","useEffect","collection","onSnapshot","snapshot","data","docs","map","doc","id","length","sort","x","y","cnt","auth","onAuthStateChanged","user","currentUser","className","onClick","evt","signOut","value","onChange","target","placeholder","alert","signInWithEmailAndPassword","then","filter","push","catch","error","errorCode","code","errorMessage","message","console","log","add","content","ref","update","chat","documentId","window","confirm","delete","lastName","setLastName","firstName","setFirstName","createUserWithEmailAndPassword","emailAddress","Routes","exact","path","component","SignUp","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.60476bef.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n  apiKey: \"AIzaSyAGfPAbDT5ZCXx7F00B7G3Rtbn-TRLb7vI\",\r\n  authDomain: \"test-03-19-2021.firebaseapp.com\",\r\n  projectId: \"test-03-19-2021\",\r\n  storageBucket: \"test-03-19-2021.appspot.com\",\r\n  messagingSenderId: \"381856068644\",\r\n  appId: \"1:381856068644:web:082fd6317bfe206c4354b1\"\r\n});\r\n\r\nconst db = firebaseApp.firestore();\r\n\r\nexport {db, firebaseApp};","import React, {useState, useEffect} from 'react';\nimport {Link, useHistory} from 'react-router-dom';\nimport {db, firebaseApp} from './firebase';\nimport './App.css';\n\nfunction App() {\n  const history = useHistory();\n\n  const [chats, setChats] = useState([]);\n  const [chatContent, setChatContent] = useState(\"\");\n\n  const [chatCnt, setChatCnt] = useState(0);\n\n  const [targetDocumentId, setTargetDocumentId] = useState(\"\");\n  const [updatedContent, setUpdatedContent] = useState(\"\");\n  \n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [uid, setUid] = useState('');\n  const [nickName, setNickName] = useState('Anonymous');\n  const [loginStatus, setLoginStatus] = useState(false);\n\n\n  const login = () => {\n    if(email.length < 3) {\n      alert('!!!');\n      return\n    }\n\n    firebaseApp.auth().signInWithEmailAndPassword(email, password)\n    .then((user) => {\n\n      //find user's nickname who is logged in now.\n      const uid = (firebaseApp.auth().currentUser || {}).uid\n      if(uid){\n        const userInfoRef = db.collection('userInfo');\n        userInfoRef.onSnapshot((snapshot) => {\n          const data = snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n          }));\n          let currentUser = data.filter(x => x.uid === uid);\n          setNickName(currentUser[0].nickName);\n    \n    \n        })\n        setLoginStatus(true);\n        setUid(uid);\n\n        setEmail(\"\");\n        setPassword(\"\");\n\n        history.push(\"/\");\n      }else{\n        alert('error');\n      }\n    })\n    .catch((error) => {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorCode, errorMessage);\n    });\n  }\n\n  const logout = () => {\n    firebaseApp.auth().signOut();\n    setLoginStatus(false);\n    setNickName(\"Anonymous\");\n  }\n\n  const signUp = () => {\n    history.push(\"/signUp\");\n  }\n\n  const addDocument = () => {\n    db\n      .collection('chat')\n      .add({\n        uid: uid,\n        content: chatContent,\n        cnt: chatCnt,\n        nickName: nickName\n      })\n      .then((ref) => {\n        setChatContent('');\n        setChatCnt(cnt => cnt + 1);\n      })\n    \n  }\n\n  const updateDocument = () => {\n    const chatRef = db.collection('chat').doc(targetDocumentId);\n\n    chatRef\n      .update({\n        content: updatedContent\n      })\n      .then(() => {\n        setTargetDocumentId(\"\");\n        setUpdatedContent(\"\");\n      })\n  }\n\n  const deleteDocument = (documentId) => {\n    var txt;\n    var r = window.confirm('Press a confirm button!');\n    if (r == true) {\n      db.collection('chat').doc(documentId).delete().then (() => {})\n    } else {\n      alert('You canceled')\n    }\n  }\n\n  useEffect(() => {\n    const chatRef = db.collection('chat');\n    chatRef.onSnapshot((snapshot) => {\n      const data = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      if (data.length) {\n        data.sort((x, y) => {return x.cnt - y.cnt})\n        setChatCnt(data[data.length - 1].cnt + 1)\n      }\n      setChats(data);\n      //id, content\n\n\n    })\n  }, [])\n\n  useEffect(() => {\n    firebaseApp.auth().onAuthStateChanged((user) => {\n      const uid = (firebaseApp.auth().currentUser || {}).uid\n      if(uid){\n        setLoginStatus(true);\n        setUid(uid);\n      }else{\n      }\n    })\n  }, [])\n\n  return (\n    <div className=\"App\">\n\n      {\n        loginStatus\n        ?\n        <>\n          <div className = \"btn btn-danger\" onClick = {evt => {logout()}}>Logout</div>\n        </>\n        :\n        <>\n          <input className = \"default-textarea\" value = {email} onChange = {evt => {setEmail(evt.target.value)}} placeholder = \"email\">\n\n          </input>\n          <input className = \"default-textarea\" value = {password} onChange = {evt => {setPassword(evt.target.value)}} placeholder = \"password\">\n            \n          </input>\n          <div className = \"btn btn-success\" onClick = {evt => login()}>Login</div>\n          <div className = \"btn btn-signUp\" onClick = {evt => signUp() }>Sign Up</div>\n        </>\n\n      }\n\n      <br/>\n      <textarea\n        className = \"default-textarea\"\n        value = {chatContent}\n        onChange = {evt => {setChatContent(evt.target.value)}}\n        placeholder = \"type here to add\"></textarea>\n      <div className = \"btn btn-success\" value = {chatContent} onClick = {evt => addDocument(evt.target.value)}>Add</div>\n      \n      <br/>\n      <textarea\n        className = \"default-textarea\"\n        value = {targetDocumentId}\n        onChange = {evt => {setTargetDocumentId(evt.target.value)}}\n        placeholder = \"document id\"></textarea>\n      <textarea\n        className = \"default-textarea\"\n        value = {updatedContent}\n        onChange = {evt => {setUpdatedContent(evt.target.value)}}\n        placeholder = \"new context\"></textarea>\n      <div className = \"btn btn-success\" onClick = {evt => {updateDocument()}}>Update</div>\n      <br/>\n      \n      <br/>\n      <br/>\n      <br/>\n      <hr/>\n\n      {\n        chats.map((chat) => {\n          return <div onClick = {evt => deleteDocument(chat.id)}>\n            {chat.nickName}: {chat.content}\n          </div>\n        })\n      }\n\n    </div>\n\n\n  );\n}\n\nexport default App;\n","import React, {useState, useEffect} from 'react';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport './App.css';\r\nimport { db, firebaseApp} from './firebase';\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [lastName, setLastName] = useState('');\r\n  const [firstName, setFirstName] = useState('');\r\n  const [nickName, setNickName] = useState('');\r\n\r\n  const createAccount = () => {\r\n    firebaseApp.auth().createUserWithEmailAndPassword(email, password)\r\n      .then((user) => {\r\n        const uid = (firebaseApp.auth().currentUser || {}).uid;\r\n        db\r\n          .collection('userInfo')\r\n          .add({\r\n            uid: uid,\r\n            emailAddress: email,\r\n            password: password,\r\n            firstName: firstName,\r\n            lastName: lastName,\r\n            nickName: nickName\r\n          })\r\n          .then((ref) => {\r\n            console.log(email, password, firstName, lastName, nickName);\r\n            console.log('success to sign up');\r\n            history.push('/');\r\n          })\r\n          .catch((error) => {\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            console.log(errorCode, errorMessage);\r\n          })\r\n      })\r\n      .catch((error) => {\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        console.log(errorCode, errorMessage);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className = \"btn btn-signUp\">First Name</div>\r\n      <input\r\n        className = \"default-textarea\"\r\n        placeholder = \"First name\"\r\n        value = {firstName}\r\n        onChange = {evt => {setFirstName(evt.target.value)}}></input>\r\n      <br/>\r\n      <div className = \"btn btn-signUp\">Last Name</div>\r\n      <input\r\n        className = \"default-textarea\"\r\n        placeholder = \"Last name\"\r\n        value = {lastName}\r\n        onChange = {evt => {setLastName(evt.target.value)}}></input>\r\n      <br/>\r\n      <div className = \"btn btn-signUp\">Email Address</div>\r\n      <input\r\n        className = \"default-textarea\"\r\n        placeholder = \"Email\"\r\n        value = {email}\r\n        onChange = {evt => {setEmail(evt.target.value)}}></input>\r\n      <br/>\r\n      <div className = \"btn btn-signUp\">Password</div>\r\n      <input\r\n        className = \"default-textarea\"\r\n        placeholder = \"password\"\r\n        value = {password}\r\n        onChange = {evt => {setPassword(evt.target.value)}}></input>\r\n      <br/>\r\n      <div className = \"btn btn-signUp\">Nickname</div>\r\n      <input\r\n        className = \"default-textarea\"\r\n        placeholder = \"nickname\"\r\n        value = {nickName}\r\n        onChange = {evt => {setNickName(evt.target.value)}}></input>\r\n      <br/>\r\n      <div\r\n        className = \"btn btn-success\"\r\n        onClick = {evt => {createAccount()}}>Sign Up!</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch,\r\n} from 'react-router-dom';\r\nimport App from './App';\r\nimport SignUp from './SignUp';\r\n// import Daily from './Pages/Daily';\r\n\r\nclass Routes extends React.Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={App}/>\r\n          <Route exact path=\"/signup\" component={SignUp}/>\r\n        </Switch>\r\n      </Router>\r\n    )\r\n  }\r\n}\r\nexport default Routes;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport SignUp from './SignUp';\r\nimport Routes from './Routes';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Routes />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}